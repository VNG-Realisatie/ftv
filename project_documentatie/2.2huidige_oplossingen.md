# Inventarisatie van huidige oplossingen

## Scope
Als we gaan kijken naar 'huidige oplossingen' dan beperken we ons tot in productie zijnde API's
binnen het stelsel van basisregistraties. Daarnaast zijn er voorgestelde oplossingen die niet uitgevoerd zijn,
oplossingen buiten het stelsel, open API's, en oplossingen die niet met API's te maken hebben. 
Die laten we buiten beschouwing.

## Methodieken van toegangsverlening
Een algemene beschrijving van de gangbare methodieken van toegangsverlening en een [vergelijking](https://federatief.datastelsel.nl/kennisbank/pbac/) is
gemaakt in het FDS project. Ook onder GEMMA is een [vergelijking](https://www.gemmaonline.nl/wiki/WMA_RBAC_ABAC_en_PBAC) gemaakt.
Dit zijn methodieken, dus categorie&euml;n van oplossingen, niet concrete implementaties.

Aan de buitenkant, aan de API, de interface, is niet te zien hoe toegangsverlenging werkelijk
gerealiseerd is. Neem als voorbeeld een REST API waar geen toegangsverleningsinformatie wordt meegegeven.
De toegang zal dan zijn afgeleid uit de identificatie. De dienst kan dan een lijst van identiteiten 
hebben, en als de identiteit op de lijst staat wordt volledige toegang verleend. Dan noemen
we de methodiek Access Control List (ACL). Het kan ook zijn dat aan elke identiteit op de lijst
weer een lijst van rollen is gekoppeld, waarmee een vorm van RBAC is bereikt. En het kan evengoed
zijn dat de dienst per identiteit een lijst van attributen of toegangsregels heeft die intern uitgevoerd, en dus
ABAC of PBAC genoemd mag worden. We zullen dus bij de aanbieders moeten informeren hoe het gerealiseerd is.

We kunnen er wel vanuit gaan dat er geen federatieve methodieken in gebruik zijn. 

## Relatie met bestaande koppelstandaarden
De volgende koppelstandaarden zijn relevant om als context te zien:
- **Diginetwerk**. Een afsprakenstelsel op infrastructuurniveau dat een besloten netwerk realiseert voor de overheid (de transportlaag).
- **Digikoppeling**. Een set van standaarden en afspraken over koppelvlakken die o.a. de encryptie regelt (de sessielaag). 

  Digikoppeling omvat, bovenop een encryptielaag, de standaarden ebMS2, WUS, REST en Grote Berichten, die elk een methodiek van koppelen 
  beschrijven (de applicatielaag).
  - WUS is een samentrekking van 3 wat oudere standaarden WSDL, UDDI en SOAP, en digikoppeling beschrijft de Nederlandse regels over het gebruik daarvan.
  - REST is een standaard die wereldwijd voor alle moderne API's gebruikt wordt. De beschrijving onder digikoppeling zegt meer over hoe
de Nederlandse overheid REST toepast. 
- **StUF**. Een standaard bovenop WUS die een XML-formaat voor berichtenuitwisseling beschrijft
- **HaalCentraal**. Een set van afspraken en standaarden waarmee basisregistraties RESTful API's volgens overheidsregels worden gebouwd
en gebruikt. 

Voor dit project stellen we dat StUF, ebMS2, WUS en Grote Berichten een oudere generatie zijn en niet als API's gezien worden 
in onze terminologie.

Digikoppeling met REST is de huidige standaard voor basisregistratie-API's, en in het bijzonder HaalCentraal waarin uitgebreide
voorzieningen worden geboden voor onder andere IAM en logging.

Geen van deze standaarden schrijft echter een methodiek van toegangsverlening voor. Implementaties zijn vrij deze toe te voegen
naar eigen inzicht.

## Inventarisatie

Op de [HaalCentraal website](https://vng-realisatie.github.io/Haal-Centraal/aansluiten-op-apis) kunnen we vinden welke API's volgens 
die methode geleverd zijn.

| Code | Naam basisregistratie / dienst           | Koppelvlak   | Toegangsverlening | [Digimelding](../architecture/inventarisation/TMV.md) | Digilevering |
|------|------------------------------------------|--------------|-------------------|-------------------------------------------------------------|--------------|
| [BRP](../architecture/inventarisation/BRP.md)  | Personen (inclusief RNI)                 |              |                   | X                                                           |              |
|      | Personen                                 | HaalCentraal |                   |                                                             |              |
|      | Bewoning                                 | HaalCentraal |                   |                                                             |              |
|      | Reisdocumenten                           | HaalCentraal |                   |                                                             |              |
|      | Historie                                 | HaalCentraal |                   |                                                             |              |
|      | Tabellen                                 | HaalCentraal |                   |                                                             |              |
| HR   | Handelsregister                          |              |                   | X                                                           | X            |
|      | Zoeken                                   |              |                   |                                                             |              |
|      | Basisprofiel                             | REST         |                   |                                                             |              |
|      | Vestigingsprofiel                        |              |                   |                                                             |              |
|      | Naamgeving                               |              |                   |                                                             |              |
| BAG  | Adressen en Gebouwen                     |              |                   | X                                                           | X            |
|      | Bevragen                                 | HaalCentraal |                   |                                                             |              |
| BRT  | Topografie                               |              |                   | X                                                           |              |
| BRK  | Kadaster                                 |              |                   |                                                             | X            |
|      | Bevragen                                 | HaalCentraal |                   |                                                             |              |
| BRV  | Voertuigen (kentekenregister)            |              |                   |                                                             |              |
| BRI  | Inkomen                                  |              |                   |                                                             |              |
| WOZ  | Waarde Onroerende Zaken                  |              |                   |                                                             | X            |
|      | Bevragen                                 | HaalCentraal |                   |                                                             |              |
| BGT  | Grootschalige Topografie (voorheen GBKN) |              |                   |                                                             |              |
| BRO  | Ondergrond                               |              |                   |                                                             |              |
| BGT  | Grootschalige Topografie (voorheen GBKN) |              |                   | X                                                           |              |

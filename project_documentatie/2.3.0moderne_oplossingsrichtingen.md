# Inventarisatie van moderne oplossingen

Om te komen tot mogelijke oplossingsrichtingen inventariseren we eerst de eisen die context
aan een oplossing stelt, en vervolgens de nadelen aan de bestaande oplossing. 
Hiermee kunnen we toetsen of de oplossing aan de gevraagde eisen en voordelen tegemoet komt.

## Relevante richtlijnen vanuit de overheid
Als overheidsbreed initiatief valt FTV onder GDI. De doelarchitectuur zal zich daarom richten naar de domeinarchitecturen 
[toegang](https://minbzk.github.io/gdi-toegang/content/views/Domeinarchitectuur%20toegang.html) en
[gegevensuitwisseling](https://minbzk.github.io/gdi-gegevensuitwisseling/content/views/Domeinarchitectuur%20gegevensuitwisseling.html).
Dit zijn de relevante ontwikkelingen rondom toegangsverlening die vanuit de GDI zijn gesignaleerd:
1. [**Contextuele toegangscontrole**](https://minbzk.github.io/gdi-toegang/content/elements/id-3a8d1d87c09c4893ab51905141811cbf.html): 
gebruik maken van gegevens uit de context, zoals locatie, apparaat, tijd etc.
de toegangsverlening aan te passen.
2. [**Het zero trust principe**](https://minbzk.github.io/gdi-toegang/content/elements/id-be3e1d7fce8c415190791ff10295f078.html): 
niet alleen de buitenschil controleren en daarbinnen volledige toegang geven, maar meer compartimentalisatie, en dan toegangscontrole per compartiment.
3. [**Verklaringen**](https://minbzk.github.io/gdi-toegang/content/elements/id-44448c40cae246fb9a87e33446f0c0d4.html):
het gebruik van gekwalificeerde verklaringen in plaats van rollen, waardoor afgifte en gebruik van attributen van elkaar losgekoppeld worden.
Beide partijen kennen en erkennen de verklaringen, en kunnen op basis daarvan toegang verlenen.
Dit kan de toegangsverlening significant eenvoudiger maken, omdat de dienst en de toegang niet op voorhand elkaar hoeven te kennen.
Dit heet ook wel Attribute Based Credentials (ABC).
4. **Wissel alleen strikt noodzakelijke gegevens uit**. Dit principe heeft een aantal voor toegangsverlening relevante implicaties:
   - De grondslag en doelbinding van een uitwisseling moet bekend zijn
   - Per dienst moet bekend zijn welke gegevens noodzakelijk zijn
   - Voor bevoegde autoriteiten, zoals opsporing, moet het wel mogelijk zijn pseudoniemen te herleiden naar personen of organisaties.

## Nadelen aan de huidige toegangsverlening 

1. **Controle alleen door aanbieder.**
Traditioneel wordt toegangsverlening bepaald en gecontroleerd door de aanbieder.
Er wordt van tevoren per dienst per afnemer een contract gesloten.
Vervolgens vraagt de afnemer naar behoefte op, en toetst de aanbieder elke vraag aan het contract.

    Hier zitten nadelen aan:
   - Als er veel afnemers zijn, zijn er ook veel contracten. Die vragen veel beheerinspanning, ICT maar vooral ook juridisch.
   - De controleplicht ligt geheel bij de aanbieder. Dit is:
     - onevenredig veel werk
     - niet altijd praktisch uitvoerbaar, omdat toegang afhankelijk kan zijn van eigenschappen van de afnemer. 
   De aanbieder kan en wil niet op de hoogte zijn van details van elke afnemer.
     - niet per se rechtvaardig, omdat afnemers meestal meer baat hebben bij de dienst dan de aanbieders
     - niet altijd juridisch juist: de afnemer moet verantwoording afleggen aan een bestuursorgaan over verantwoord datagebruik, niet de aanbieder 

2. **Beperkte flexibiliteit.** 
De regels worden over het algemeen vastgelegd in code aan de aanbiederszijde. 
Aanpassingen van code vraagt relatief veel inspanning en doorlooptijd.

3. **Beperkte verifieerbaarheid.**
Regels die in code zijn vastgelegd, of regels die op een niet-gestandaardiseerde wijze zijn vastgelegd, zijn lastig te controleren. 
Ze zitten 'verstopt' in code die alleen ontwikkelaars kunnen inzien, of in bestanden die veel kennis vergen om te begrijpen.

4. **Beperkte standaardisatie.**
Omdat er geen breed gedragen standaardmethode is voor toegangsverlening hebben de meeste aanbieders een eigen methode gekozen, 
veelal ook zelf bedacht. Dat heeft voor de hand liggende nadelen: 
   - ieder doet het denk- en bouwwerk voor zich, dat kost tijd en geld
   - het kost meer moeite elkaar te begrijpen
   - afnemers moeten voor elke aanbieder weer zo goed als van voren af aan beginnen

## Oplossingsrichtingen

We beschrijven hier 3 elementen van een moderne oplossingsrichting, en bekijken van elk of die tegemoet komt aan
de richtlijnen en/of nadelen.

### Vertrouwensraamwerken 
Een alternatieve methode van toegang regelen is een vertrouwensraamwerk of trust framework.
Hierbij wordt uitgegaan van een stelsel van afspraken waarop vertrouwd kan worden in plaats van wantrouwen als uitgangspunt.
In zo'n raamwerk voeren afnemer en aanbieder elk hun deel van de controle uit. De aanbieder mag vertrouwen dat de afnemer
zijn deel gedaan heeft. 

Dit komt tegemoet aan richtlijn 3 (Verklaringen) en het nadeel 1 (Controle alleen door aanbieder), dat boven beschreven is, op voorwaarde dat de gemaakte
afspraken nu wel uitvoerbaar, rechtvaardig en juist zijn.

Het concept van gekwalificeerde verklaringen past in een vertrouwensraamwerk. 
Een afnemer begeleidt zijn vragen met een set verklaringen, en de aanbieder vertrouwt deze verklaringen.
De verklaringen gaan over welke gegevens de afnemer mag weten, niet per se welke dienst hij wil afnemen.
Door diensten ook uit te drukken in termen van de gegevens die ze bevatten, kan gecontroleerd worden of de vraag vertrouwd is,
zelfs als afnemer en aanbieder elkaar niet kennen.

Gekwalificeerd verklaringen maken al deel uit van eIDAS 2.0 in de vorm van de European Digital Identity (EDI) Wallet.
In Nederlands moet het EDI-stelsel NL daar invulling aan gaan geven; hierin is nog veel onbekend.

> Nog te evalueren [een onderzoek](https://www.cs.ru.nl/~jhh/publications/abc-of-abcs.pdf)

### Mens &egrave;n machineleesbare toegangsregels
Door toegangsregels (Engels Policies) vast te leggen in een gestandaardiseerd formaat dat door machines gelezen en uitgevoerd kan worden
wordt het makkelijker om het beleid aan te passen, omdat er geen code aangepast hoeft te worden.

En door toegangsregels tegelijkertijd zodanig inzichtelijk te maken dat ze door niet-ontwikkelaars begrijpelijk en aanpasbaar zijn 
wordt de flexibiliteit en verifieerbaarheid beter.

Deze regels komen daarmee tegemoet aan nadelen 2 (flexibiliteit) en 3 (verifieerbaarheid).

### Policy Based Access Control
PBAC is een methodiek die een aantal elementen combineert:
- Toegangsregels worden in aparte machine-uitvoerbare bestanden vastgelegd (nadelen 2 en 3)
- De context (locatie, tijd, etc.) kan worden gebruikt in toegangsregels (richtlijn 1)

PBAC is in eerdere papers vergeleken (door [FDS](https://federatief.datastelsel.nl/kennisbank/pbac/#hoe-werkt-pbac-over-verschillende-organisaties-in-een-federatief-datastelsel) en door [GEMMA](https://www.gemmaonline.nl/wiki/WMA_RBAC_ABAC_en_PBAC)), en ook
concreet voorgesteld onder [GEMMA](https://www.gemmaonline.nl/wiki/WMA_Informatiearchitectuur).

Let wel, PBAC is een methodiek en (nog) geen standaard. 
De invullingen die aan PBAC gegeven zijn vertonen weliswaar veel overeenkomsten, maar er is nog veel ruimte voor
eigen interpretatie.

Aan richtlijnen 2, en 4 zal in de implementatie tegemoet gekomen moeten worden. 
Nadeel 4 wordt impliciet geadresseerd door met een standaard te komen.

## Risico's en bezwaren

### Weerstand tegen verlegging van verantwoordelijkheden
Essentieel aan het aanleggen van een vertrouwensnetwerk is dat een deel van de toegangscontroles
worden verlegd van aanbieder naar afnemer. Dat kan aan beide kanten bezwaren opleveren.
- Aanbieders (of eigenlijk bronhouders) geven daarmee een taak uit handen, en daarmee een stuk controle. Dat kan organisatorisch
en politiek op weerstand stuiten.
- Afnemers moeten meer verantwoording gaan afleggen. Ze zullen verplicht worden om gekwalificeerde verklaringen aan te vragen
en het toepassen daarvan te implementeren, en daarmee een risico lopen als dat niet goed gebeurt. Er is een kans dat niet meegewerkt
wordt om risico uit te stellen.

Voornaamste weerlegging van deze bezwaren is dat het juridisch nu eenmaal zo moet; 
de bronhouders hoeven formeel geen verantwoording af te leggen over de verstrekking, dat moeten de afnemers doen.

### Behoefte wordt niet gedeeld
Nu zijn de partijen min of meer vrij om toegangsverlening te implementeren zoals zij dat het beste achten, en hebben dat ook gedaan.
Het introduceren van een standaardmethode gaat hoe dan ook werk opleveren, zonder dat daar per se verbeterde functionaliteit tegenover staat.
Weliswaar zal in een goed vertrouwensnetwerk in veel zaken voorzien zijn, en wordt er ook tijd bespaard als de aansluitingen 
gestandaardiseerd zijn, maar inspanning is onvermijdelijk.

Het project zal daarom motivatie, documentatie en ondersteuning moeten bieden.

>Door naar [semantiek](2.3.1semantiek.md)
